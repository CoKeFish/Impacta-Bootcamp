[
  {
    "id": "TC001",
    "title": "Authenticate User with Stellar Freighter Wallet",
    "description": "Validate that users can authenticate successfully using Stellar Freighter wallet and receive a valid JWT token with 24-hour expiry.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to login page"
      },
      {
        "type": "action",
        "description": "Connect a valid Stellar Freighter wallet"
      },
      {
        "type": "action",
        "description": "Sign backend SEP-0053 challenge using the wallet"
      },
      {
        "type": "assertion",
        "description": "Verify JWT token is issued and stored for session with 24-hour validity"
      },
      {
        "type": "assertion",
        "description": "Check UI reflects authenticated state with correct wallet address and roles"
      }
    ]
  },
  {
    "id": "TC002",
    "title": "Fail Authentication with Invalid Wallet Signature",
    "description": "Ensure authentication is rejected if wallet signature of SEP-0053 challenge is invalid or not signed.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to login page"
      },
      {
        "type": "action",
        "description": "Initiate wallet connection but submit invalid signature or refuse to sign challenge"
      },
      {
        "type": "assertion",
        "description": "Verify authentication fails and no JWT token is issued"
      },
      {
        "type": "assertion",
        "description": "Check appropriate error message is displayed to user"
      }
    ]
  },
  {
    "id": "TC003",
    "title": "Create Group Invoice with Valid Inputs",
    "description": "Verify successful creation of group invoice with required fields and proper validation for line items and deadline.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to invoice creation form after login"
      },
      {
        "type": "action",
        "description": "Enter invoice name (non-empty string)"
      },
      {
        "type": "action",
        "description": "Enter a valid description"
      },
      {
        "type": "action",
        "description": "Set deadline to a valid future date/time"
      },
      {
        "type": "action",
        "description": "Add at least one line item with description and positive amount"
      },
      {
        "type": "action",
        "description": "Select at least one participant"
      },
      {
        "type": "action",
        "description": "Submit the invoice creation form"
      },
      {
        "type": "assertion",
        "description": "Invoice is created and visible in invoice dashboard with draft status"
      }
    ]
  },
  {
    "id": "TC004",
    "title": "Invoice Creation Failure on Missing Required Fields",
    "description": "Ensure invoice creation fails with proper validation messages when required fields are missing or invalid.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to invoice creation form"
      },
      {
        "type": "action",
        "description": "Leave invoice name empty"
      },
      {
        "type": "action",
        "description": "Set deadline to a past date"
      },
      {
        "type": "action",
        "description": "Add line item with zero or negative amount"
      },
      {
        "type": "action",
        "description": "Try submitting the form"
      },
      {
        "type": "assertion",
        "description": "Validation errors are shown for name, deadline, and line item amount fields"
      },
      {
        "type": "assertion",
        "description": "Invoice creation is prevented"
      }
    ]
  },
  {
    "id": "TC005",
    "title": "Link Group Invoice on-chain Using Soroban Transaction",
    "description": "Test successful build, simulation, signing, and submission of Soroban transaction that creates on-chain escrow for the invoice.",
    "category": "integration",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Select a draft invoice in detail view"
      },
      {
        "type": "action",
        "description": "Invoke 'Link on-chain' action"
      },
      {
        "type": "assertion",
        "description": "Soroban transaction is built with correct invoice parameters"
      },
      {
        "type": "assertion",
        "description": "Transaction simulation completes without errors"
      },
      {
        "type": "action",
        "description": "Sign and submit transaction via Freighter wallet"
      },
      {
        "type": "assertion",
        "description": "Invoice status changes to funding with on-chain escrow address linked"
      }
    ]
  },
  {
    "id": "TC006",
    "title": "Join Funding Pool and Contribute Valid Amount",
    "description": "Participants can join the invoice funding pool and contribute amounts that do not exceed remaining target.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Authenticate as a participant user"
      },
      {
        "type": "action",
        "description": "Navigate to funding invoice detail with funding status"
      },
      {
        "type": "action",
        "description": "Join the funding pool"
      },
      {
        "type": "action",
        "description": "Contribute an amount less than or equal to the remaining required amount"
      },
      {
        "type": "assertion",
        "description": "Contribution is accepted and recorded"
      },
      {
        "type": "assertion",
        "description": "Progress bar and participant contribution info updates accordingly"
      }
    ]
  },
  {
    "id": "TC007",
    "title": "Reject Contribution when Overfunding the Invoice",
    "description": "Reject participant contributions that would exceed the invoice target amount.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to funding invoice detail as a participant"
      },
      {
        "type": "action",
        "description": "Attempt to contribute amount exceeding the remaining unpaid amount"
      },
      {
        "type": "assertion",
        "description": "Contribution is rejected with error message"
      },
      {
        "type": "assertion",
        "description": "Invoice funding progress does not change"
      }
    ]
  },
  {
    "id": "TC008",
    "title": "Withdraw Contribution Before Funding Completion with Penalty Enforcement",
    "description": "Participant withdraws from funding pool before invoice completion, penalty enforced according to rules.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Join and contribute to an active funding invoice"
      },
      {
        "type": "action",
        "description": "Withdraw contributed amount before invoice is marked completed"
      },
      {
        "type": "assertion",
        "description": "Withdrawal processed successfully with penalty deducted as per rules"
      },
      {
        "type": "assertion",
        "description": "Invoice funding progress and participant list update correctly"
      }
    ]
  },
  {
    "id": "TC009",
    "title": "Organizer Modifies Invoice Items and Requires Participant Consent",
    "description": "Verify that when invoice items are modified by organizer, participants are notified and may withdraw opting out of penalty.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Organizer modifies line items of a funding invoice"
      },
      {
        "type": "assertion",
        "description": "Modification banner or notification appears for participants"
      },
      {
        "type": "action",
        "description": "Participants acknowledge modifications or choose to withdraw without penalty"
      },
      {
        "type": "assertion",
        "description": "System updates invoice participant status accordingly"
      }
    ]
  },
  {
    "id": "TC010",
    "title": "Confirm Readiness and Trigger Auto-Release of Funds",
    "description": "All participants confirm readiness to release funds and invoice triggers automatic on-chain fund distribution when enabled.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Participants individually confirm readiness to release funds"
      },
      {
        "type": "assertion",
        "description": "All participants statuses reflect confirmation"
      },
      {
        "type": "action",
        "description": "System detects all confirmations and auto-release toggle is enabled"
      },
      {
        "type": "assertion",
        "description": "On-chain release transaction is built, signed and submitted successfully"
      },
      {
        "type": "assertion",
        "description": "Invoice status updates to released"
      }
    ]
  },
  {
    "id": "TC011",
    "title": "Organizer Cancels Invoice with Full Refund and Penalty Trigger",
    "description": "Organizer cancels an invoice in funding mode, triggering refund and penalty return through smart contract logic.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Organizer selects an invoice in funding status"
      },
      {
        "type": "action",
        "description": "Trigger invoice cancellation action"
      },
      {
        "type": "assertion",
        "description": "Cancellation confirmation prompt shown"
      },
      {
        "type": "action",
        "description": "Confirm cancellation"
      },
      {
        "type": "assertion",
        "description": "Smart contract executes refund and penalty return correctly"
      },
      {
        "type": "assertion",
        "description": "Invoice status updates to cancelled"
      },
      {
        "type": "assertion",
        "description": "UI reflects cancelled state and disables further actions"
      }
    ]
  },
  {
    "id": "TC012",
    "title": "Service Catalog Displays Active Services with Search Filtering",
    "description": "Verify public-facing service catalog lists all active services and supports keyword filtering.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to public service catalog page"
      },
      {
        "type": "assertion",
        "description": "List shows active services with name, description, price, and business name"
      },
      {
        "type": "action",
        "description": "Enter keyword into search filter input"
      },
      {
        "type": "assertion",
        "description": "Service catalog filters results and updates list accordingly"
      }
    ]
  },
  {
    "id": "TC013",
    "title": "CRUD Operations for Business Management",
    "description": "Authenticated business owners can create, read, update, and delete businesses with associated data.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to 'My Businesses' page"
      },
      {
        "type": "action",
        "description": "Create a new business with valid name, wallet address, and contact info"
      },
      {
        "type": "assertion",
        "description": "New business appears in business list"
      },
      {
        "type": "action",
        "description": "Edit existing business and change details"
      },
      {
        "type": "assertion",
        "description": "Business updates are saved and displayed"
      },
      {
        "type": "action",
        "description": "Delete a business"
      },
      {
        "type": "assertion",
        "description": "Deleted business no longer appears in list"
      }
    ]
  },
  {
    "id": "TC014",
    "title": "CRUD Operations for Service Management Under a Business",
    "description": "Authenticated users can add, edit, and remove services associated with their registered businesses.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Select a business from 'My Businesses'"
      },
      {
        "type": "action",
        "description": "Add new service with name, description, price, and optional image"
      },
      {
        "type": "assertion",
        "description": "New service appears under business service list"
      },
      {
        "type": "action",
        "description": "Edit existing service details"
      },
      {
        "type": "assertion",
        "description": "Service details update correctly in UI and backend"
      },
      {
        "type": "action",
        "description": "Remove a service"
      },
      {
        "type": "assertion",
        "description": "Service is deleted and no longer listed"
      }
    ]
  },
  {
    "id": "TC015",
    "title": "View User Profile Information",
    "description": "Verify authenticated users can view their wallet address, username, role, and registration date correctly.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Log in with a valid user"
      },
      {
        "type": "action",
        "description": "Navigate to user profile page"
      },
      {
        "type": "assertion",
        "description": "User wallet address, username, role, and registration date are displayed correctly"
      }
    ]
  },
  {
    "id": "TC016",
    "title": "Admin Dashboard Access and Role Management",
    "description": "Verify only admin users can access the admin dashboard; admins can view user list and modify user roles.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Authenticate as non-admin user"
      },
      {
        "type": "action",
        "description": "Attempt to access admin dashboard URL"
      },
      {
        "type": "assertion",
        "description": "Access is denied or redirected for non-admin users"
      },
      {
        "type": "action",
        "description": "Authenticate as admin user"
      },
      {
        "type": "action",
        "description": "Navigate to admin dashboard"
      },
      {
        "type": "assertion",
        "description": "Admin dashboard with user list, business overview, and invoice management is displayed"
      },
      {
        "type": "action",
        "description": "Change role of a user through UI controls"
      },
      {
        "type": "assertion",
        "description": "User role updates are persisted and reflected in UI"
      }
    ]
  },
  {
    "id": "TC017",
    "title": "Invoice Lifecycle State Transitions Are Accurate",
    "description": "Validate that invoice status transitions follow documented flows and match backend state and UI representation.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Create a new invoice (status: draft)"
      },
      {
        "type": "action",
        "description": "Link invoice on-chain (status: funding)"
      },
      {
        "type": "action",
        "description": "Complete funding by participants (status: completed)"
      },
      {
        "type": "action",
        "description": "Release funds on-chain (status: released)"
      },
      {
        "type": "assertion",
        "description": "UI shows correct status badges and details at each stage"
      },
      {
        "type": "assertion",
        "description": "Backend invoice status matches UI"
      }
    ]
  },
  {
    "id": "TC018",
    "title": "Authorization Enforcement for Admin and Owner Endpoints",
    "description": "Ensure backend API endpoints and UI routes are protected by middleware enforcing role-based access control.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Attempt access to admin-only API endpoints as non-admin user"
      },
      {
        "type": "assertion",
        "description": "Access is denied with appropriate HTTP status code"
      },
      {
        "type": "action",
        "description": "Attempt access to business or invoice management endpoints as non-owner user"
      },
      {
        "type": "assertion",
        "description": "Access is denied"
      },
      {
        "type": "action",
        "description": "Access restricted UI pages without proper authentication or authorization"
      },
      {
        "type": "assertion",
        "description": "Pages redirect or display access denied messages"
      }
    ]
  },
  {
    "id": "TC019",
    "title": "Responsive Layout and Navigation Based on Authentication State",
    "description": "Verify that the header navigation links dynamically update based on whether user is unauthenticated, authenticated, or admin.",
    "category": "ui",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Visit site as public visitor"
      },
      {
        "type": "assertion",
        "description": "Header shows link to public Services catalog only"
      },
      {
        "type": "action",
        "description": "Authenticate as regular user"
      },
      {
        "type": "assertion",
        "description": "Header includes links for Invoices and My Businesses"
      },
      {
        "type": "action",
        "description": "Authenticate as admin user"
      },
      {
        "type": "assertion",
        "description": "Header additionally shows Admin dashboard link"
      },
      {
        "type": "action",
        "description": "Test navigation menu on mobile viewport using hamburger menu"
      },
      {
        "type": "assertion",
        "description": "Menu expands and links are accessible and correct"
      }
    ]
  },
  {
    "id": "TC020",
    "title": "Soroban Transaction Builder Mock Mode Returns Correct Mock XDR",
    "description": "In development mode, Soroban transaction builder returns valid mock XDR without RPC call or Freighter signature, and backend accepts it.",
    "category": "integration",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Set environment to DEV_MODE"
      },
      {
        "type": "action",
        "description": "Trigger invoice on-chain action to build transaction"
      },
      {
        "type": "assertion",
        "description": "Frontend returns a mock XDR string"
      },
      {
        "type": "action",
        "description": "Submit mock XDR to backend transaction endpoint"
      },
      {
        "type": "assertion",
        "description": "Backend simulates transaction and returns successful result without error"
      }
    ]
  }
]
